# ì‹¤ì‹œê°„ í™˜ì ë™ì‘ ë¶„ì„ (Movement Detection & Analysis)

## ğŸ“Œ ê°œìš”
ì´ í”„ë¡œì íŠ¸ëŠ” **ì¬í™œ ë° ì„ìƒ ì—°êµ¬ë¥¼ ìœ„í•œ ì‹¤ì‹œê°„ í™˜ì ë™ì‘ ë¶„ì„**ì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.  
ë¹„ë””ì˜¤ë¥¼ ìº¡ì²˜í•œ í›„ í”„ë ˆì„ì„ ì¶”ì¶œí•˜ê³ , í¬ì¦ˆ ì¶”ë¡ ì„ í†µí•´ ê´€ì ˆ í‚¤í¬ì¸íŠ¸ë¥¼ ì–»ì–´ êµ¬ì¡°í™”ëœ ë©”íƒ€ë°ì´í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.  
ì „ì²´ íŒŒì´í”„ë¼ì¸ì€ ëª¨ë“ˆí™”Â·ì¬í˜„ì„±Â·ëŒ€ê·œëª¨ í™•ì¥ì„ ê³ ë ¤í•˜ì—¬ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

> **ì„¤ëª…**  
> - `batch/` : ë¡œê·¸ ë° ë°°ì¹˜ ì‹¤í–‰ ê´€ë ¨ íŒŒì¼  
> - `data/` : ì›ë³¸ ë°ì´í„°, í”„ë ˆì„, í‚¤í¬ì¸íŠ¸, ë³€í™˜ëœ mp4, ì„ì‹œ ë°ì´í„° ë“±ì„ í¬í•¨í•œ í•µì‹¬ ë°ì´í„° ë””ë ‰í† ë¦¬  
> - `docs/` : í”„ë¡œì íŠ¸ ë¬¸ì„œ  
> - `ipynb/` : ì£¼í”¼í„° ë…¸íŠ¸ë¶ íŒŒì¼ ë° JSON êµì • ê²°ê³¼  
> - `py/` : íŒŒì´ì¬ ì†ŒìŠ¤ ì½”ë“œ ëª¨ë“ˆ  
> - `sapiens/` : ì™¸ë¶€ pose-estimation ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ì„œë¸Œëª¨ë“ˆ (ì„¸ë¶€ êµ¬ì¡°ëŠ” ìƒëµ)  

---

## âš™ï¸ íŒŒì´í”„ë¼ì¸
1. **ë¹„ë””ì˜¤ ì „ì²˜ë¦¬**
   - í”„ë ˆì„ ì¶”ì¶œ (`extract_frames.py`)
   - `ffprobe`ë¥¼ í†µí•œ ë©”íƒ€ë°ì´í„° ìˆ˜ì§‘ (fps, í•´ìƒë„, ì½”ë±, ê¸¸ì´)

2. **í¬ì¦ˆ ì¶”ë¡ **
   - YOLOv8 â†’ í™˜ì ë°”ìš´ë”© ë°•ìŠ¤ ì¶”ì¶œ
   - Sapiens-Pose / RTMDet / MMPose â†’ í‚¤í¬ì¸íŠ¸ ê²€ì¶œ
   - í”„ë ˆì„ë³„ JSON ì €ì¥

3. **ì˜¤ë²„ë ˆì´ ìƒì„±**
   - ìŠ¤ì¼ˆë ˆí†¤ ì˜¤ë²„ë ˆì´ (`create_overlay.py`)
   - ì£¼ì„ëœ MP4 ì¶œë ¥

4. **ê²€ì¦ ë° ë¬´ê²°ì„± ì²´í¬**
   - í”„ë ˆì„ ìˆ˜ vs. JSON ê°œìˆ˜ ë¹„êµ
   - ë©”íƒ€ë°ì´í„° ì¼ê´€ì„± ê²€ì¦
   - ëˆ„ë½ëœ í‚¤í¬ì¸íŠ¸ ì¬ì¶”ì¶œ

---

## ğŸ› ï¸ ì£¼ìš” ìŠ¤í¬ë¦½íŠ¸
- `extract_frames.py` â€“ ì›ë³¸ ì˜ìƒì—ì„œ í”„ë ˆì„ ì¶”ì¶œ  
- `extract_keypoints.py` â€“ í”„ë ˆì„ì— ëŒ€í•´ í¬ì¦ˆ ì¶”ë¡  ìˆ˜í–‰  
- `create_overlay.py` â€“ ì˜ìƒì— ìŠ¤ì¼ˆë ˆí†¤ ì˜¤ë²„ë ˆì´ ìƒì„±  
- `process_video.py` â€“ ì—”ë“œ íˆ¬ ì—”ë“œ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰  
- `reextract_missing_keypoints.py` â€“ ëˆ„ë½ JSON ì²˜ë¦¬  
- `sapiens_raw_data.py` â€“ `metadata.csv` ì—…ë°ì´íŠ¸  

---

## ğŸ“‘ ë©”íƒ€ë°ì´í„°
`metadata.csv`ëŠ” ëª¨ë“  ì˜ìƒ ì²˜ë¦¬ ê³¼ì •ì„ ê¸°ë¡í•˜ëŠ” í…Œì´ë¸”ì…ë‹ˆë‹¤:
- `file_name`, `codec`, `width`, `height`, `fps`, `duration`, `nb_frames`
- `frames_verified`, `json_ratio`, `processed_status`
- ì²˜ë¦¬ ë° ê²€ì¦ ì‹œì  íƒ€ì„ìŠ¤íƒ¬í”„

---

## ğŸš€ ìš”êµ¬ ì‚¬í•­
- batch í´ë” ë‚´ hccmove.Dockerfile

---

## ğŸ“– ì‚¬ìš©ë²•
```bash
# 1. í”„ë ˆì„ ì¶”ì¶œ
python py/extract_frames.py --input RAW_DATA --output FRAME

# 2. í¬ì¦ˆ ì¶”ë¡  ì‹¤í–‰
python py/extract_keypoints.py --input FRAME --output KEYPOINTS

# 3. ì˜¤ë²„ë ˆì´ ì˜ìƒ ìƒì„±
python py/create_overlay.py --input FRAME --keypoints KEYPOINTS --output MP4
